name: Keep Backend Alive

on:
  schedule:
    - cron: "*/5 * * * *" # Every 10 minutes
  workflow_dispatch: # Allow manual trigger

jobs:
  ping-backend:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Backend Health
        run: |
          echo "ğŸ”„ Pinging backend to keep it alive..."
          echo "â° Time: $(date)"

          # Your actual Render URL
          BACKEND_URL="https://music-app-frri.onrender.com"

          # Try multiple endpoints for redundancy
          echo "ğŸ“¡ Pinging health endpoint..."
          curl -f -s "$BACKEND_URL/health" && echo "âœ… Health endpoint: OK" || echo "âŒ Health endpoint: Failed"

          echo "ğŸ“¡ Pinging ping endpoint..."
          curl -f -s "$BACKEND_URL/ping" && echo "âœ… Ping endpoint: OK" || echo "âŒ Ping endpoint: Failed"

          echo "ğŸ“¡ Pinging keep-alive endpoint..."
          curl -f -s "$BACKEND_URL/keep-alive" && echo "âœ… Keep-alive endpoint: OK" || echo "âŒ Keep-alive endpoint: Failed"

          echo "âœ… Keep-alive ping completed successfully"
          echo "â° Next ping in 10 minutes"
